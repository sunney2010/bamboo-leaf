# 概述
> segment算法利用每个节点每次从DB获取数据段放内存中,单节点在数据段内有序生成。该算法初型最早是出现阿里的tddl-sequence,已经过各种高并发的洗礼,segment算法以牺牲序列的绝对连续性、绝对有序性特性。以整体连续、相对有序，大大性能提高(通过增加节点数、步长加大,QPS可达到100W+甚至更高),来解决分步式系统中对序列生成的要求。

# leaf-segment
   leaf-segment是参考了阿里的tddl-sequence，美团的leaf保留他们的优点，同时解决了他们存在不的足。更丰富用户体验、扩展算法能更加满足分布式系统中的种使用场景。

 **优化内容：**
1. 支持本地模式(Local)及远程服务模式(Remote)。
2. 支持跨IDC同序列不同的序号生成机制(A机房：1、3、5... B机房：2.4.6...)。
3. 支持segment的预加载模式,大大提高性能。
4. 支持表名及字段的自定义。
5. 支持关键性能属性的可配置。

**segment性能配置**

| 序号 | 参数名称 | 参数描述 | 默认值 | 说明  |
|----|------|------|-----|---|
|  1 |bamboo.leaf.configure.retry | 重试次数 |  10   | 获取数据段更新数据库时重试次数  |
|  2 |bamboo.leaf.configure.loadingPercent| 预加载比例  |   25  | 上个数据段消耗还剩下百分比时，<br>加载下个数据段  |
|  3 |bamboo.leaf.configure.step|步长|1000| 每次从数据库获取的数据段大小  |

说明：这三个参数可以提高的segment性能。
